---
title: Css原理
description: A guide in my new Starlight docs site.
---

## Css 解析原理

### 层叠与特异性

     (0,0,0,0) 分别代表的是 (内联样式，ID 选择器，类选择器，元素选择器)

![css层叠与特异性图](@/assets/img/CSS/CSS-cascadeSpecificity.png)

1. CSS 声明标有!important 有最高优先级；

2. 内联样式总是优先于外部样式表中的样式；

3. 包含 1 个 ID 的选择器比 1000 个类选择器优先级高且更具体。

4. 包含 1 个 class 的选择器比 1000 个元素选择器优先级高且更具体。

5. 通用选择器 \* 没有特异性，（0,0,0,0）

6. 更多地依赖于特异性，而不是选择者的顺序；

7. 当有第三方样式表的时候，最好把自己的样式表放到最后。

### 层叠冲突

    比较源的重要性
    比较优先级
    比较次序

1. 比较源的重要性
   - 浏览器会有一个基本的样式表来给任何网页设置默认样式。这些样式统称<mark>用户代理样式</mark>。
   - 网页的作者可以定义文档的样式，这是最常见的样式表，称之为<mark>页面作者样式</mark>。
   - 浏览器的用户，可以使用自定义样式表定制使用体验，称之为<mark>用户样式</mark>。
2. 比较优先级
   - 内联样式 > 内部样式表 > 外部样式表 > 用户样式 > 网页作者样式。
3. 比较次序
   > 经历了上面两个步骤，大多数的样式声明能够被确定下来。但是还剩下最后一种情况，那就是样式声明既是同源，权重也相同。
   - 后来加载的样式表优先级更高。

### 属性值处理过程

![CSS解析原理图](@/assets/img/CSS/CSS-valueProcessing.png)

1. 每一个属性都有初始值，如果没有定义的话会使用。

2. 浏览器会为每一个页面指定根元素的 font-size，默认是 16px。

3. 百分比和相对的值会转换为 px。

4. 如果对 font-size 使用百分比会根据其父元素的 font-size 计算。

5. 如果是指定长度类的值为百分比会根据其父元素的 width 计算。

6. em 单位会根据其父元素的 font-size 计算。

7. 如果指定长度 em 单位会根据 当前元素的 font-size 计算。

8. rem 会根据当前的 document 的 font-size 计算。

9. vh 和 vw 百分比会根据当前视口的高度和宽度计算。

## Css 视觉格式化模型

    > 是一种算法，计算盒子大小，决定其布局在渲染树中的每个元素，主要为了确认页面的最终布局

1. 盒子尺寸：盒模型。
2. 盒子类型：块级元素和行内元素，行级块元素。
3. 定位方案：float、position.
4. 堆叠上下文: 用来管理元素之间的层叠关系。

## CSS 包含块

包含块分为两种，一种是根元素（HTML 元素）所在的包含块，被称之为初始包含块（**initial containing block**）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。
另外一种是对于非根元素，对于非根元素的包含块判定就有几种不同的情况了。大致可以分为如下几种：

- 如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的块容器（block container）的内容区域（content area）的边缘建立。
- 如果 position 属性是 fixed，那么包含块由视口建立。
- 如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为 fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。

## Sass 包含的内容

1. 变量：用于存储可重用的值，例如颜色、字体大小、间距等；
2. 嵌套：将选择器嵌套在彼此内部，使我们能够编写更少的代码；
3. 运算符：用于在 CSS 中进行数学运算；
4. 混合：编写可重用的 CSS 代码片段；
5. 函数：类似于混合，不同之处在于它们产生一个值，然后可以使用该值；
6. 扩展：使不同的选择器继承共同的声明；
7. 控制指令：用于使用条件和循环编写复杂的代码。
